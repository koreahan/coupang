<!-- 버튼: 명시적으로 type="button" 지정 -->
<button id="btnDeep" class="btn" type="button">딥링크 생성</button>

<!-- 복사 버튼도 동일 -->
<button id="btnCopyLink" class="btn secondary small" type="button" disabled>링크 복사</button>

<style>
/* URL 표시 영역은 터치/클릭 불가 처리 (의도치 않은 이동 방지) */
#deeplink{
  pointer-events: none;       /* 클릭/탭 막기 */
  -webkit-touch-callout: none;/* iOS 터치 메뉴 방지 */
  user-select: text;          /* 텍스트 선택은 허용(필요시) */
}
</style>

<script>
// 이벤트 기본동작/버블링 방지
$("btnDeep").addEventListener("click", async (e) => {
  e.preventDefault();
  e.stopPropagation();
  if (BUSY) return;
  setBusy(true);
  try {
    setErr("");
    const url = firstUrl($("inp").value);
    if (!url) { setErr("쿠팡 링크를 입력하세요."); return; }
    $("deeplink").textContent = "(생성 중...)";
    await createDeeplink(url).catch((err) => {
      setErr(err.message);
      $("deeplink").textContent = "(오류 발생)";
      throw err;
    });
  } finally { setBusy(false); }
});

$("btnCopyLink").addEventListener("click", async (e) => {
  e.preventDefault();
  e.stopPropagation();
  const link = $("deeplink").textContent.trim();
  if (!link || link.startsWith("(")) return;
  try {
    await navigator.clipboard.writeText(link);
    alert("✅ 링크가 복사되었습니다!");
  } catch (err) {
    alert("복사 실패: " + err.message);
  }
});
</script>
